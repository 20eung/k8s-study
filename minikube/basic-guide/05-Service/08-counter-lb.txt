$ vi 07-counter-lb.yml


$ kubectl apply -f 07-counter-lb.yml
service/counter-lb created


$ kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)           AGE
kubernetes   ClusterIP      10.43.0.1      <none>        443/TCP           2d4h
redis        ClusterIP      10.43.30.147   <none>        6379/TCP          27h
counter-np   NodePort       10.43.95.3     <none>        3000:31000/TCP    11m
counter-lb   LoadBalancer   10.43.18.112   10.234.5.67   30000:30683/TCP   46s


$ kubectl get all
NAME                          READY   STATUS    RESTARTS   AGE
pod/redis-5cb78b9855-whpz7    1/1     Running   0          27h
pod/counter-985748f4c-jm96n   1/1     Running   0          27h

NAME                 TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)           AGE
service/kubernetes   ClusterIP      10.43.0.1      <none>        443/TCP           2d4h
service/redis        ClusterIP      10.43.30.147   <none>        6379/TCP          27h
service/counter-np   NodePort       10.43.95.3     <none>        3000:31000/TCP    10m
service/counter-lb   LoadBalancer   10.43.18.112   10.234.5.67   30000:30683/TCP   5s

NAME                      READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/redis     1/1     1            1           27h
deployment.apps/counter   1/1     1            1           27h

NAME                                DESIRED   CURRENT   READY   AGE
replicaset.apps/redis-5cb78b9855    1         1         1       27h
replicaset.apps/counter-985748f4c   1         1         1       27h
